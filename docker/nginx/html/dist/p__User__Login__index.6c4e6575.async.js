"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{94149:function(b,u,e){e.d(u,{Z:function(){return j}});var n=e(1413),r=e(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},f=E,p=e(42135),v=function(o,Z){return r.createElement(p.Z,(0,n.Z)((0,n.Z)({},o),{},{ref:Z,icon:f}))};v.displayName="LockOutlined";var j=r.forwardRef(v)},24454:function(b,u,e){e.d(u,{Z:function(){return j}});var n=e(1413),r=e(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},f=E,p=e(42135),v=function(o,Z){return r.createElement(p.Z,(0,n.Z)((0,n.Z)({},o),{},{ref:Z,icon:f}))};v.displayName="MobileOutlined";var j=r.forwardRef(v)},16434:function(b,u,e){var n=e(1413),r=e(74165),E=e(15861),f=e(91),p=e(97685),v=e(80737),j=e(30124),y=e(71577),o=e(67294),Z=e(83607),M=e(85893),O=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],s=o.forwardRef(function(d,i){var l=v.Z.useFormInstance(),h=(0,o.useState)(d.countDown||60),z=(0,p.Z)(h,2),J=z[0],S=z[1],$=(0,o.useState)(!1),A=(0,p.Z)($,2),t=A[0],m=A[1],w=(0,o.useState)(),Y=(0,p.Z)(w,2),q=Y[0],F=Y[1],ee=d.rules,Q=d.name,I=d.phoneName,g=d.fieldProps,W=d.captchaTextRender,te=W===void 0?function(P,x){return P?"".concat(x," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:W,G=d.captchaProps,T=(0,f.Z)(d,O),U=function(){var P=(0,E.Z)((0,r.Z)().mark(function x(_){return(0,r.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,F(!0),c.next=4,T.onGetCaptcha(_);case 4:F(!1),m(!0),c.next=13;break;case 8:c.prev=8,c.t0=c.catch(0),m(!1),F(!1),console.log(c.t0);case 13:case"end":return c.stop()}},x,null,[[0,8]])}));return function(_){return P.apply(this,arguments)}}();return(0,o.useImperativeHandle)(i,function(){return{startTiming:function(){return m(!0)},endTiming:function(){return m(!1)}}}),(0,o.useEffect)(function(){var P=0,x=d.countDown;return t&&(P=window.setInterval(function(){S(function(_){return _<=1?(m(!1),clearInterval(P),x||60):_-1})},1e3)),function(){return clearInterval(P)}},[t]),(0,M.jsxs)("div",{style:(0,n.Z)((0,n.Z)({},g==null?void 0:g.style),{},{display:"flex",alignItems:"center"}),ref:i,children:[(0,M.jsx)(j.Z,(0,n.Z)((0,n.Z)({},g),{},{style:{flex:1,transition:"width .3s",marginRight:8}})),(0,M.jsx)(y.Z,(0,n.Z)((0,n.Z)({style:{display:"block"},disabled:t,loading:q},G),{},{onClick:(0,E.Z)((0,r.Z)().mark(function P(){var x;return(0,r.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!I){a.next=9;break}return a.next=4,l.validateFields([I].flat(1));case 4:return x=l.getFieldValue([I].flat(1)),a.next=7,U(x);case 7:a.next=11;break;case 9:return a.next=11,U("");case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),console.log(a.t0);case 16:case"end":return a.stop()}},P,null,[[0,13]])})),children:te(t,J)}))]})}),C=(0,Z.G)(s);u.Z=C},5966:function(b,u,e){var n=e(1413),r=e(91),E=e(67294),f=e(69595),p=e(85893),v=["fieldProps","proFieldProps"],j=["fieldProps","proFieldProps"],y="text",o=function(s){var C=s.fieldProps,d=s.proFieldProps,i=(0,r.Z)(s,v);return(0,p.jsx)(f.Z,(0,n.Z)({valueType:y,fieldProps:C,filedConfig:{valueType:y},proFieldProps:d},i))},Z=function(s){var C=s.fieldProps,d=s.proFieldProps,i=(0,r.Z)(s,j);return(0,p.jsx)(f.Z,(0,n.Z)({valueType:"password",fieldProps:C,proFieldProps:d,filedConfig:{valueType:y}},i))},M=o;M.Password=Z,M.displayName="ProFormComponent",u.Z=M},68262:function(b,u,e){e.d(u,{U:function(){return d}});var n=e(1413),r=e(91),E=e(89451),f=e(76519),p=e(94184),v=e.n(p),j=e(67294),y=e(34994),o=e(4942),Z=e(98082),M=function(l){var h;return h={},(0,o.Z)(h,l.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:l.colorTextSecondary,fontSize:l.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),(0,o.Z)(h,"@media (min-width: @screen-md-min)",(0,o.Z)({},"".concat(l.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"})),h};function O(i){return(0,Z.Xj)("LoginForm",function(l){var h=(0,n.Z)((0,n.Z)({},l),{},{componentCls:".".concat(i)});return[M(h)]})}var s=e(85893),C=["logo","message","contentStyle","title","subTitle","actions","children"];function d(i){var l,h=i.logo,z=i.message,J=i.contentStyle,S=i.title,$=i.subTitle,A=i.actions,t=i.children,m=(0,r.Z)(i,C),w=(0,E.YB)(),Y=m.submitter===!1?!1:(0,n.Z)((0,n.Z)({searchConfig:{submitText:w.getMessage("loginForm.submitText","\u767B\u5F55")}},m.submitter),{},{submitButtonProps:(0,n.Z)({size:"large",style:{width:"100%"}},(l=m.submitter)===null||l===void 0?void 0:l.submitButtonProps),render:function(G,T){var U,P=T.pop();if(typeof(m==null||(U=m.submitter)===null||U===void 0?void 0:U.render)=="function"){var x,_;return m==null||(x=m.submitter)===null||x===void 0||(_=x.render)===null||_===void 0?void 0:_.call(x,G,T)}return P}}),q=(0,j.useContext)(f.ZP.ConfigContext),F=q.getPrefixCls("pro-form-login"),ee=O(F),Q=ee.wrapSSR,I=ee.hashId,g=function(G){return"".concat(F,"-").concat(G," ").concat(I)},W=(0,j.useMemo)(function(){return h?typeof h=="string"?(0,s.jsx)("img",{src:h}):h:null},[h]);return Q((0,s.jsxs)("div",{className:v()(g("container"),I),children:[(0,s.jsxs)("div",{className:"".concat(g("top")," ").concat(I).trim(),children:[S||W?(0,s.jsxs)("div",{className:"".concat(g("header")),children:[W?(0,s.jsx)("span",{className:g("logo"),children:W}):null,S?(0,s.jsx)("span",{className:g("title"),children:S}):null]}):null,$?(0,s.jsx)("div",{className:g("desc"),children:$}):null]}),(0,s.jsxs)("div",{className:g("main"),style:(0,n.Z)({width:328},J),children:[(0,s.jsxs)(y.A,(0,n.Z)((0,n.Z)({isKeyPressSubmit:!0},m),{},{submitter:Y,children:[z,t]})),A?(0,s.jsx)("div",{className:g("main-other"),children:A}):null]})]}))}},90760:function(b,u,e){e.r(u),e.d(u,{default:function(){return _}});var n=e(15009),r=e.n(n),E=e(97857),f=e.n(E),p=e(99289),v=e.n(p),j=e(5574),y=e.n(j),o=e(66116),Z=e(99058),M=e(87547),O=e(94149),s=e(24454),C=e(68262),d=e(5966),i=e(16434),l=e(1413),h=e(91),z=e(22270),J=e(32808),S=e(67294),$=e(83607),A=e(69595),t=e(85893),m=["options","fieldProps","proFieldProps","valueEnum"],w=S.forwardRef(function(a,c){var R=a.options,H=a.fieldProps,ae=a.proFieldProps,ne=a.valueEnum,X=(0,h.Z)(a,m);return(0,t.jsx)(A.Z,(0,l.Z)({ref:c,valueType:"checkbox",valueEnum:(0,z.h)(ne,void 0),fieldProps:(0,l.Z)({options:R},H),lightProps:(0,l.Z)({labelFormatter:function(){return(0,t.jsx)(A.Z,(0,l.Z)({ref:c,valueType:"checkbox",mode:"read",valueEnum:(0,z.h)(ne,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({options:R},H),proFieldProps:ae},X))}},X.lightProps),proFieldProps:ae},X))}),Y=S.forwardRef(function(a,c){var R=a.fieldProps,H=a.children;return(0,t.jsx)(J.Z,(0,l.Z)((0,l.Z)({ref:c},R),{},{children:H}))}),q=(0,$.G)(Y,{valuePropName:"checked"}),F=q;F.Group=w;var ee=F,Q=e(80854),I=e(14670),g=e(12461),W=e(66715),te=e(26713),G=e(27049),T={container:"container___REQAy",lang:"lang___DAjLY",content:"content___IkUx1",icon:"icon___fqAhh"},U=e(14430),P=function(c){var R=c.content;return(0,t.jsx)(I.Z,{style:{marginBottom:24},message:R,type:"error",showIcon:!0})},x=function(){var c=(0,S.useState)({}),R=y()(c,2),H=R[0],ae=R[1],ne=(0,S.useState)("account"),X=y()(ne,2),re=X[0],ie=X[1],se=(0,Q.useModel)("@@initialState"),ce=se.initialState,ue=se.setInitialState,de=function(){var k=v()(r()().mark(function L(K){var V,N,B;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,(0,U.E9)(f()({},K));case 3:if(V=D.sent,!V.data){D.next=9;break}return N=new URL(window.location.href).searchParams,Q.history.push(N.get("redirect")||"/"),ue({loginUser:V.data}),D.abrupt("return");case 9:D.next=16;break;case 11:D.prev=11,D.t0=D.catch(0),B="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",console.log(D.t0),g.ZP.error(B);case 16:case"end":return D.stop()}},L,null,[[0,11]])}));return function(K){return k.apply(this,arguments)}}(),oe=H.status,le=H.type;return(0,t.jsxs)("div",{className:T.container,children:[(0,t.jsx)("div",{className:T.content,children:(0,t.jsxs)(C.U,{logo:(0,t.jsx)("img",{alt:"logo",src:"/logo.png"}),title:"\u514D\u8D39API",subTitle:"\u514D\u8D39 API \u5F00\u653E\u5E73\u53F0",initialValues:{autoLogin:!0},onFinish:function(){var k=v()(r()().mark(function L(K){return r()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,de(K);case 2:case"end":return N.stop()}},L)}));return function(L){return k.apply(this,arguments)}}(),children:[(0,t.jsx)(W.Z,{activeKey:re,onChange:ie,centered:!0,items:[{key:"account",label:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"},{key:"mobile",label:"\u624B\u673A\u53F7\u767B\u5F55"}]}),oe==="error"&&le==="account"&&(0,t.jsx)(P,{content:"\u9519\u8BEF\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801(admin/admin12345)"}),re==="account"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{name:"userAccount",fieldProps:{size:"large",prefix:(0,t.jsx)(M.Z,{className:T.prefixIcon})},placeholder:"\u7528\u6237\u540D: admin or user",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879\uFF01"}]}),(0,t.jsx)(d.Z.Password,{name:"userPassword",fieldProps:{size:"large",prefix:(0,t.jsx)(O.Z,{className:T.prefixIcon})},placeholder:"\u5BC6\u7801: admin12345",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879\uFF01"}]})]}),oe==="error"&&le==="mobile"&&(0,t.jsx)(P,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),re==="mobile"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{fieldProps:{size:"large",prefix:(0,t.jsx)(s.Z,{className:T.prefixIcon})},name:"mobile",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01",rules:[{required:!0,message:"\u624B\u673A\u53F7\u662F\u5FC5\u586B\u9879\uFF01"},{pattern:/^1\d{10}$/,message:"\u4E0D\u5408\u6CD5\u7684\u624B\u673A\u53F7\uFF01"}]}),(0,t.jsx)(i.Z,{fieldProps:{size:"large",prefix:(0,t.jsx)(O.Z,{className:T.prefixIcon})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01",captchaTextRender:function(L,K){return L?"".concat(K," ","\u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",rules:[{required:!0,message:"\u9A8C\u8BC1\u7801\u662F\u5FC5\u586B\u9879\uFF01"}],onGetCaptcha:function(){var k=v()(r()().mark(function L(K){var V;return r()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,Z.m)({phone:K});case 2:if(V=B.sent,V!==!1){B.next=5;break}return B.abrupt("return");case 5:g.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return B.stop()}},L)}));return function(L){return k.apply(this,arguments)}}()})]}),(0,t.jsx)("div",{style:{marginBottom:24},children:(0,t.jsxs)(te.Z,{split:(0,t.jsx)(G.Z,{type:"vertical"}),children:[(0,t.jsx)(ee,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,t.jsx)(Q.Link,{to:"/user/register",children:"\u65B0\u7528\u6237\u6CE8\u518C"}),(0,t.jsx)("a",{style:{float:"right"},href:"https://zhaoxi7109.github.io/",target:"_blank",rel:"noreferrer",children:"\u5FD8\u8BB0\u5BC6\u7801"})]})})]})}),(0,t.jsx)(o.Z,{})]})},_=x},99058:function(b,u,e){e.d(u,{m:function(){return y}});var n=e(15009),r=e.n(n),E=e(97857),f=e.n(E),p=e(99289),v=e.n(p),j=e(80854);function y(Z,M){return o.apply(this,arguments)}function o(){return o=v()(r()().mark(function Z(M,O){return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",(0,j.request)("/api/login/captcha",f()({method:"GET",params:f()({},M)},O||{})));case 1:case"end":return C.stop()}},Z)})),o.apply(this,arguments)}},43146:function(){},29913:function(b,u,e){var n=e(43146)},68018:function(b,u,e){var n=e(43146),r=e(29913),E=e(83736),f=e(6516)},83736:function(b,u,e){var n=e(43146),r=e(38390)},6516:function(b,u,e){var n=e(43146)},38390:function(b,u,e){var n=e(43146)}}]);
